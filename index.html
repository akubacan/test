<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Android Time Generator</title>

<!-- Roboto Font -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">

<style>
body {
  font-family: Arial, sans-serif;
  padding: 20px;
  background: #f2f2f2;
}

button {
  padding: 10px 20px;
  margin-right: 10px;
  cursor: pointer;
}

canvas {
  margin-top: 20px;
  border: 1px solid #ccc;
  max-width: 100%;
}
</style>
</head>
<body>

<h3>Generate Screenshot With Real-Time Clock</h3>

<button onclick="generatePreview()">Generate Preview</button>
<button onclick="downloadImage()">Download Image</button>

<br>
<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

const img = new Image();
img.src = "https://akubacan.github.io/test/uncall.jpg"; // WAJIB: simpan gambar dengan nama ini

let imageLoaded = false;

img.onload = async function () {
    canvas.width = img.width;
    canvas.height = img.height;
    imageLoaded = true;

    await document.fonts.load("500 20px Roboto");
    drawImageWithTime();
};

function getCurrentTime() {
    const now = new Date();
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    return `${hours}:${minutes}`;
}

function drawImageWithTime() {
    if (!imageLoaded) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(img, 0, 0);

    const timeText = getCurrentTime();

    // STYLE STATUS BAR ANDROID
    ctx.font = "500 37px Roboto";
    ctx.fillStyle = "#404040";
    ctx.textAlign = "left";
    ctx.textBaseline = "top";

    /*
      KOORDINAT UNTUK GAMBAR 1080px WIDTH
      Cocok untuk screenshot yang kamu kirim
      Jika ukuran berbeda, sesuaikan.
    */
    const x = 52;   // posisi horizontal
    const y = 52;   // posisi vertical

    ctx.fillText(timeText, x, y);
}

function generatePreview() {
    drawImageWithTime();
}

function downloadImage() {
    const link = document.createElement("a");
    link.download = "generated-screenshot.png";
    link.href = canvas.toDataURL("image/png");
    link.click();
}
</script>

</body>
</html>
